import{defineInterface as e}from"@directus/extensions-sdk";import{defineComponent as t,ref as i,computed as n,watch as r,resolveComponent as o,resolveDirective as s,openBlock as c,createElementBlock as l,Fragment as u,createVNode as a,withCtx as d,withDirectives as p,createBlock as m,withModifiers as v,unref as f,createCommentVNode as g}from"vue";import{useI18n as y}from"vue-i18n";import h from"plyr.vue";
/*! get-video-id v3.5.3 | @license MIT © Michael Wuergler | https://github.com/radiovisual/get-video-id */function b(e){return e.includes("?")&&(e=e.split("?")[0]),e.includes("/")&&(e=e.split("/")[0]),e.includes("&")&&(e=e.split("&")[0]),e}function w(e){let t=e;t=t.replace("-nocookie",""),t=t.replace(/#t=.*$/,""),t=t.replace(/^https?:\/\//,"");const i=/youtube:\/\/|youtu\.be\/|y2u\.be\//g;if(i.test(t)){return b(t.split(i)[1])}const n=/\/shorts\//g;if(n.test(t))return b(t.split(n)[1]);const r=/v=|vi=/g;if(r.test(t)){return b(t.split(r)[1].split("&")[0])}const o=/\/v\/|\/vi\/|\/watch\//g;if(o.test(t)){return b(t.split(o)[1])}const s=/\/an_webp\//g;if(s.test(t)){return b(t.split(s)[1])}const c=/\/e\//g;if(c.test(t)){return b(t.split(c)[1])}const l=/\/embed\//g;if(l.test(t)){return b(t.split(l)[1])}if(/\/user\/([a-zA-Z\d]*)$/g.test(t))return;if(/\/user\/(?!.*videos)/g.test(t)){return b(t.split("/").pop())}const u=/\/attribution_link\?.*v%3D([^%&]*)(%26|&|$)/;if(u.test(t))return b(t.match(u)[1]);const a=/\/live\//g;if(a.test(t)){return b(t.split(a)[1])}}function x(e){let t,i,n=e;n.includes("#")&&([n]=n.split("#")),n.includes("?")&&!n.includes("clip_id=")&&([n]=n.split("?"));const r=/https?:\/\/vimeo\.com\/event\/(\d+)$/.exec(n);if(r&&r[1])return r[1];const o=/https?:\/\/vimeo\.com\/(\d+)/.exec(n);if(o&&o[1])return o[1];const s=["https?://player.vimeo.com/video/[0-9]+$","https?://vimeo.com/channels","groups","album"].join("|");return new RegExp(s,"gim").test(n)?(i=n.split("/"),i&&i.length>0&&(t=i.pop())):/clip_id=/gim.test(n)&&(i=n.split("clip_id="),i&&i.length>0&&([t]=i[1].split("&"))),t}function k(e){const t=/https:\/\/vine\.co\/v\/([a-zA-Z\d]*)\/?/.exec(e);if(t&&t.length>1)return t[1]}function _(e){let t;if(e.includes("embed"))return t=/embed\/(\w{8})/,e.match(t)[1];t=/\/v\/(\w{8})/;const i=e.match(t);return i&&i.length>0?i[1]:void 0}function A(e){const t=(e.includes("embed")?/https:\/\/web\.microsoftstream\.com\/embed\/video\/([a-zA-Z\d-]*)\/?/:/https:\/\/web\.microsoftstream\.com\/video\/([a-zA-Z\d-]*)\/?/).exec(e);if(t&&t.length>1)return t[1]}function T(e){const t=/tiktok\.com(.*)\/video\/(\d+)/gm.exec(e);if(t&&t.length>2)return t[2]}function z(e){const t=/dailymotion\.com(.*)(video)\/([a-zA-Z\d]+)/gm.exec(e);if(t)return t[3];const i=/dai\.ly\/([a-zA-Z\d]+)/gm.exec(e);if(i&&i.length>1)return i[1];const n=/dailymotion\.com(.*)video=([a-zA-Z\d]+)/gm.exec(e);return n&&n.length>2?n[2]:void 0}function E(e){if("string"!=typeof e)throw new TypeError("sanitizeUrl expected a string, got "+typeof e);let t=e;return/<iframe/gi.test(t)&&(t=function(e){if("string"!=typeof e)throw new TypeError("getSrc expected a string");const t=/src="(.*?)"/gm.exec(e);if(t&&t.length>=2)return t[1]}(t)||""),t=t.trim(),t=t.replace("/www.","/"),t}function Z(e){if("string"!=typeof e)throw new TypeError("get-video-id expects a string");const t=function(e){if("string"!=typeof e)throw new TypeError("extractGoogleRedirectionUrl expected a string, got "+typeof e);const t=e.trim();if(/\/\/google|www\.google/.test(t))try{const t=new URL(e),i=new URLSearchParams(t.search).get("url");if(i)return decodeURIComponent(i)}catch{return t}return t}(E(e));let i={id:null,service:null};return/youtube|youtu\.be|y2u\.be|i.ytimg\./.test(t)?i={id:w(t),service:"youtube"}:/vimeo/.test(t)?i={id:x(t),service:"vimeo"}:/vine/.test(t)?i={id:k(t),service:"vine"}:/videopress/.test(t)?i={id:_(t),service:"videopress"}:/microsoftstream/.test(t)?i={id:A(t),service:"microsoftstream"}:/tiktok\.com/.test(t)?i={id:T(t),service:"tiktok"}:/(dailymotion\.com|dai\.ly)/.test(t)&&(i={id:z(t),service:"dailymotion"}),i}var U=t({__name:"interface",props:{value:{}},emits:["input"],setup(e,{emit:t}){const b=e,w=t,{t:x}=y(),k=i(null),_=n((()=>!0)),A=n((()=>"YouTube Video ID …")),T=n({get:()=>k.value,set(e){const{id:t}=Z(null!=e?e:"");k.value=null!=t?t:e}});function z(){T.value=null}return r((()=>{var e;return null==(e=b.value)?void 0:e.id}),(e=>{k.value=null!=e?e:null})),r(T,(e=>{w("input",i({id:e}))})),(e,t)=>{const i=o("v-icon"),n=o("v-input"),r=s("tooltip");return c(),l(u,null,[a(n,{modelValue:T.value,"onUpdate:modelValue":t[0]||(t[0]=e=>T.value=e),clickable:_.value,placeholder:A.value},{append:d((()=>[T.value?p((c(),m(i,{key:0,class:"deselect",name:"close",onClick:v(z,["stop"]),clickable:""},null,512)),[[r,f(x)("deselect")]]):g("v-if",!0)])),_:1},8,["modelValue","clickable","placeholder"]),T.value?(c(),m(h,{key:0,service:"youtube",id:T.value},null,8,["id"])):g("v-if",!0)],64)}}}),R=[],S=[];!function(e,t){if(e&&"undefined"!=typeof document){var i,n=!0===t.prepend?"prepend":"append",r=!0===t.singleTag,o="string"==typeof t.container?document.querySelector(t.container):document.getElementsByTagName("head")[0];if(r){var s=R.indexOf(o);-1===s&&(s=R.push(o)-1,S[s]={}),i=S[s]&&S[s][n]?S[s][n]:S[s][n]=c()}else i=c();65279===e.charCodeAt(0)&&(e=e.substring(1)),i.styleSheet?i.styleSheet.cssText+=e:i.appendChild(document.createTextNode(e))}function c(){var e=document.createElement("style");if(e.setAttribute("type","text/css"),t.attributes)for(var i=Object.keys(t.attributes),r=0;r<i.length;r++)e.setAttribute(i[r],t.attributes[i[r]]);var s="prepend"===n?"afterbegin":"beforeend";return o.insertAdjacentElement(s,e),e}}("\n.v-input[data-v-df4499a9] .input .prepend {\n        margin-right: 16px;\n}\n.deselect[data-v-df4499a9]:hover {\n        --v-icon-color-hover: var(--theme--danger);\n}\n",{});var V=e({id:"simple_yt_vp",name:"Video Player",icon:"box",description:"simple youtube video player",component:((e,t)=>{const i=e.__vccOpts||e;for(const[e,n]of t)i[e]=n;return i})(U,[["__scopeId","data-v-df4499a9"],["__file","interface.vue"]]),options:null,types:["string"]});export{V as default};
